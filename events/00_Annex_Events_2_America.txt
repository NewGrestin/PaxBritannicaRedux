###########################
# Annexation Events concerning America
###########################
# By lots of folks
# Converted from on_actions to decisions by Rylock and Dr_Njitram
# Any new post-annexation events need to have their triggers in the KR_on_actions file
###########################
###########################
# Thanks KR ;) - Pax Team
###########################

## the bottom table of context and other events need to be adjusted to Pax - Lexus
## i left one event as example for the rest of the events, if you're not sure check out KR code

# Table of Contents
#	No specific order but please keep events in the order as belowe
#
# AMERICA


add_namespace = annexation

#####################################
##  NORTH  AMERICA   ##
#####################################


country_event = { #Fate of Acadia
	id = annexation.1100
	title = annexation_acadia
	desc = annexation_acadia_desc
	picture = GFX_report_event_Generic_Art_Gallery

	is_triggered_only = yes

	immediate = {


			if = {
				limit = {
					OR = {
						941 = { is_claim_or_core_of_ROOT = yes } #New Dixie
						957 = { is_claim_or_core_of_ROOT = yes } #UC or Dixie
						370 = { is_claim_or_core_of_ROOT = yes } #UC or Dixie
					}
				}
				save_event_target_as = can_annex
			}
			if = {
				limit = {
					957 = { 
						annexations_state_owner_is_valid_grant_target = yes
						owner = { ROOT_can_grant_land = yes }
						owner = { tag = AME }
					}
				}
				AME = { save_event_target_as = uc_owner }
			}
			if = {
				limit = {
					957 = { 
						annexations_state_owner_is_valid_grant_target = yes
						owner = { ROOT_can_grant_land = yes }
						owner = { tag = FSA }
					}
				}
				var:957.owner = { save_event_target_as = dixie_owner }
			}

		hidden_effect = {
			#if = {
			

		}
	}

	option = { #Liberate Acadia
		log = "[GetLogInfo]: event annexation.1100 option annexation.1100.a"
		name = annexation.1100.a
		trigger = {
			is_subject = no
		}
		ai_chance = {
			base = 50
			modifier = {
				factor = 0
				annexations_can_annex = yes
			}
		}
		if = {
			limit = { country_exists = ACD }
			custom_effect_tooltip = ACD_puppet_tooltip
			
		}
		else = {
			set_temp_variable = { tag_to_release = ACD }
			release_targeted_tag = yes
		}
		recheck_annexations = yes
	}


	option = { #Give it to the Commonwealth
		log = "[GetLogInfo]: event annexation.1100 option annexation.1100.a"
		name = annexation.1100.b
		trigger = {
			has_event_target = uc_owner
			NOT = {
				OR = {
					tag = KLL
					tag = NRT
					tag = OSA
					tag = MRN
					tag = GRN
					tag = CMC
					tag = STA
					tag = DER
					tag = APA
					tag = NEV
					tag = SHO
					tag = DES
					tag = TAB
					tag = FRE
					tag = NWA
					tag = NVI
					tag = MEI
					tag = NDX
				}
			}
		}
		ai_chance = {
			base = 50
			modifier = {
				factor = 0
				annexations_can_annex = yes
			}
		}
		set_temp_variable = { tag_to_release = event_target:uc_owner }
		ACD = { set_transfer_target_cores = yes }
		transfer_targeted_territory = yes
		recheck_annexations = yes
	}


	option = { #Give it to the Dixie Free States
		log = "[GetLogInfo]: event annexation.1100 option annexation.1100.a"
		name = annexation.1100.c
		trigger = {
			has_event_target = dixie_owner
			NOT = {
				OR = {
					tag = KLL
					tag = NRT
					tag = OSA
					tag = MRN
					tag = GRN
					tag = CMC
					tag = STA
					tag = DER
					tag = APA
					tag = NEV
					tag = SHO
					tag = DES
					tag = TAB
					tag = FRE
					tag = NWA
					tag = NVI
					tag = MEI
					#tag = NDX
				}
			}
		}
		ai_chance = {
			base = 50
			modifier = {
				factor = 0
				annexations_can_annex = yes
			}
		}
		set_temp_variable = { tag_to_release = event_target:dixie_owner }
		FSA = { transfer_state_and_notify = yes }
		transfer_targeted_territory = yes
		recheck_annexations = yes
	}

	option = { #Cancel
		log = "[GetLogInfo]: event annexation.1110 option annexation.cancel"
		name = annexation.cancel
		ai_chance = { base = 0 }
		recheck_annexations = yes
	}
}



############################ WWW NATIONS


country_event = { #Fate of Apacheria
	id = annexation.1101
	title = annexation_apacheria
	desc = annexation_apacheria_desc
	picture = GFX_report_event_Generic_Art_Gallery

	is_triggered_only = yes

	immediate = {


			if = {
				limit = {
					tag_is_eligible_for_wild_west_generic_tree = yes
				}
				save_event_target_as = can_annex_www
			}
			#if = {
			#	limit = {
			#		957 = { 
			#			annexations_state_owner_is_valid_grant_target = yes
			#			owner = { ROOT_can_grant_land = yes }
			#			owner = { tag = AME }
			#		}
			#	}
			#	AME = { save_event_target_as = uc_owner }
			#}
			#if = {
			#	limit = {
			#		957 = { 
			#			annexations_state_owner_is_valid_grant_target = yes
			#			owner = { ROOT_can_grant_land = yes }
			#			owner = { tag = FSA }
			#		}
			#	}
			#	var:957.owner = { save_event_target_as = dixie_owner }
			#}

		hidden_effect = {
			#if = {
			

		}
	}

	option = { #Liberate Acadia
		log = "[GetLogInfo]: event annexation.1100 option annexation.1100.a"
		name = annexation.1100.a
		trigger = {
			is_subject = no
		}
		ai_chance = {
			base = 50
			modifier = {
				factor = 0
				annexations_can_annex = yes
			}
		}
		if = {
			limit = { country_exists = ACD }
			custom_effect_tooltip = ACD_puppet_tooltip
			
		}
		else = {
			set_temp_variable = { tag_to_release = ACD }
			release_targeted_tag = yes
		}
		recheck_annexations = yes
	}


	option = { #Give it to the Commonwealth
		log = "[GetLogInfo]: event annexation.1100 option annexation.1100.a"
		name = annexation.1100.b
		trigger = {
			has_event_target = uc_owner
			NOT = {
				OR = {
					tag = KLL
					tag = NRT
					tag = OSA
					tag = MRN
					tag = GRN
					tag = CMC
					tag = STA
					tag = DER
					tag = APA
					tag = NEV
					tag = SHO
					tag = DES
					tag = TAB
					tag = FRE
					tag = NWA
					tag = NVI
					tag = MEI
					tag = NDX
				}
			}
		}
		ai_chance = {
			base = 50
			modifier = {
				factor = 0
				annexations_can_annex = yes
			}
		}
		set_temp_variable = { tag_to_release = event_target:uc_owner }
		ACD = { set_transfer_target_cores = yes }
		transfer_targeted_territory = yes
		recheck_annexations = yes
	}


	option = { #Give it to the Dixie Free States
		log = "[GetLogInfo]: event annexation.1100 option annexation.1100.a"
		name = annexation.1100.c
		trigger = {
			has_event_target = dixie_owner
			NOT = {
				OR = {
					tag = KLL
					tag = NRT
					tag = OSA
					tag = MRN
					tag = GRN
					tag = CMC
					tag = STA
					tag = DER
					tag = APA
					tag = NEV
					tag = SHO
					tag = DES
					tag = TAB
					tag = FRE
					tag = NWA
					tag = NVI
					tag = MEI
					#tag = NDX
				}
			}
		}
		ai_chance = {
			base = 50
			modifier = {
				factor = 0
				annexations_can_annex = yes
			}
		}
		set_temp_variable = { tag_to_release = event_target:dixie_owner }
		FSA = { transfer_state_and_notify = yes }
		transfer_targeted_territory = yes
		recheck_annexations = yes
	}

	option = { #Cancel
		log = "[GetLogInfo]: event annexation.1110 option annexation.cancel"
		name = annexation.cancel
		ai_chance = { base = 0 }
		recheck_annexations = yes
	}
}


#country_event = { #Fate of Galicia
#	id = annexation.1017
#	title = annexation_spanish_galicia
#	desc = annexation_spanish_galicia_desc
#	picture = GFX_report_event_generic_conference2
#
#	is_triggered_only = yes
#
#	immediate = {
#
#		if = {
#			limit = {
#				OR = {
#					174 = { is_claim_or_core_of_ROOT = yes } #León
#					793 = { is_claim_or_core_of_ROOT = yes } #Asturias
#				}
#			}
#			save_event_target_as = can_annex
#		}
#		if = {
#			limit = {
#				174 = { #León
#					annexations_state_owner_is_valid_grant_target = yes
#					owner = { ROOT_can_grant_land = yes }
#				}
#			}
#			var:174.owner = { save_event_target_as = spain_leon }
#		}
#		if = {
#			limit = {
#				1193 = { #Asturias
#					annexations_state_owner_is_valid_grant_target = yes
#					owner = {
#						ROOT_can_grant_land = yes
#						NOT = { tag = event_target:spain_leon }
#					}
#				}
#			}
#			var:1193.owner = { save_event_target_as = spain_asturias }
#		}
#		if = {
#			limit = {
#				180 = { #Porto
#					annexations_state_owner_is_valid_grant_target = yes
#					owner = { ROOT_can_grant_land = yes }
#				}
#			}
#			var:180.owner = { save_event_target_as = porto_owner }
#		}
#	}
#
#	#option = { #puppet
#	#	log = "[GetLogInfo]: event annex.1085 option annex.1085.a"
#	#	name =annexation.1017.a
#	#	trigger = {
#	#		is_subject = no
#	#	}
#	#	ai_chance = { base = 0 }
#	#	set_temp_variable = { tag_to_release = GLC }
#	#	release_targeted_tag = yes
#	#	recheck_annexations = yes
#	#}
#
#	option = { #give to Spanish owner of León
#		log = "[GetLogInfo]: event annexation.1017 option annexation.1017.b"
#		name = annexation.1017.b
#		trigger = {
#			has_event_target = spain_leon
#		}
#		ai_chance = {
#			base = 40
#			#modifier = {
#			#	factor = 0
#			#	annexations_can_annex = yes
#			#}
#			#modifier = {
#			#	factor = 0
#			#	NOT = { is_ally_with = event_target:spain_leon }
#			#	OR = {
#			#		is_ally_with = event_target:spain_asturias
#			#		is_ally_with = event_target:portugal
#			#	}
#			#}
#			#modifier = {
#			#	factor = 0.1
#			#	event_target:spain_leon = { is_subject = yes }
#			#}
#		}
#		set_temp_variable = { tag_to_release = event_target:spain_leon }
#		171 = { transfer_state_and_notify = yes }
#		transfer_targeted_territory = yes
#		recheck_annexations = yes
#	}
#
#	option = { #give to Spanish owner of Asturias
#		log = "[GetLogInfo]: event annexation.1017 option annexation.1017.c"
#		name = annexation.1017.c
#		trigger = {
#			has_event_target = spain_asturias
#		}
#		ai_chance = {
#			base = 30
#			#modifier = {
#			#	factor = 0
#			#	annexations_can_annex = yes
#			#}
#			#modifier = {
#			#	factor = 0
#			#	NOT = { is_ally_with = event_target:spain_asturias }
#			#	OR = {
#			#		is_ally_with = event_target:spain_leon
#			#		is_ally_with = event_target:portugal
#			#	}
#			#}
#			#modifier = {
#			#	factor = 0.1
#			#	event_target:spain_asturias = { is_subject = yes }
#			#}
#		}
#		set_temp_variable = { tag_to_release = event_target:spain_asturias }
#		171 = { transfer_state_and_notify = yes }
#		transfer_targeted_territory = yes
#		recheck_annexations = yes
#	}
#
#	option = { #give to Spanish owner of Porto
#		log = "[GetLogInfo]: event annexation.1017 option annexation.1017.d"
#		name = annexation.1017.d
#		trigger = {
#			has_event_target = porto_owner
#		}
#		ai_chance = {
#			base = 30
#			#modifier = {
#			#	factor = 0
#			#	annexations_can_annex = yes
#			#}
#			#modifier = {
#			#	factor = 0
#			#	NOT = { is_ally_with = event_target:spain_asturias }
#			#	OR = {
#			#		is_ally_with = event_target:spain_leon
#			#		is_ally_with = event_target:portugal
#			#	}
#			#}
#			#modifier = {
#			#	factor = 0.1
#			#	event_target:spain_asturias = { is_subject = yes }
#			#}
#		}
#		set_temp_variable = { tag_to_release = event_target:porto_owner}
#		171 = { transfer_state_and_notify = yes }
#		transfer_targeted_territory = yes
#		recheck_annexations = yes
#	}
#
#	#option = { #Give to overlord
#	#	log = "[GetLogInfo]: event annex.1085 option annex.give_to_overlord"
#	#	name = annex.give_to_overlord
#	#	trigger = {
#	#		annexations_should_give_lands_to_overlord = yes
#	#	}
#	#	set_temp_variable = { tag_to_release = overlord }
#	#	GLC = { set_transfer_target_cores = yes }
#	#	transfer_targeted_territory = yes
#	#	recheck_annexations = yes
#	#}
#
#	option = { #Integrate
#		log = "[GetLogInfo]: event annexation.1017 option annexation.integration"
#		name = annexation.integration
#		trigger = {
#			annexations_can_annex = yes
#		}
#		#GLC = { add_claim_of_ROOT_on_valid_cores = yes }
#		recheck_annexations = yes
#	}
#
#	option = { #Cancel
#		log = "[GetLogInfo]: event annexation.1017 option annexation.cancel"
#		name = annexation.cancel
#		ai_chance = { base = 0 }
#		recheck_annexations = yes
#	}
#}
