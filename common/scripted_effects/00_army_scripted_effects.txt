# Templates are granted by researching techs
### TECH TEMPLATES ###
grant_paratrooper_tech_template = {
	hidden_effect = {
		division_template = {
			name = "Paratroopers"
			regiments = {
				paratrooper = { x = 0 y = 0 }
				paratrooper = { x = 0 y = 1 }
				paratrooper = { x = 0 y = 2 }
			}
			priority = 2
		}
	}
}

grant_marine_tech_template = {
	hidden_effect = {
		division_template = {
			name = "Marine Division"
			regiments = {
				marine = { x = 0 y = 0 }
				marine = { x = 0 y = 1 }
				marine = { x = 0 y = 2 }
			}
			priority = 2
		}
	}
}

grant_mountaineer_tech_template = {
	hidden_effect = {
		division_template = {
			name = "Mountaineer Division"
			regiments = {
				mountaineers = { x = 0 y = 0 }
				mountaineers = { x = 0 y = 1 }
				mountaineers = { x = 0 y = 2 }
			}
			priority = 2
		}
	}
}

grant_motorized_tech_template = {
	hidden_effect = {
		division_template = {
			name = "Motorized Division"
			regiments = {
				motorized = { x = 0 y = 0 }
				motorized = { x = 0 y = 1 }
				motorized = { x = 0 y = 2 }
				motorized = { x = 1 y = 0 }
				motorized = { x = 1 y = 1 }
				motorized = { x = 1 y = 2 }
			}
		}
	}
}

grant_armor_tech_template = {
	hidden_effect = {
		if = {
			limit = { has_tech = motorised_infantry }
			division_template = {
				name = "Armored Division"
				regiments = {
					light_armor = { x = 0 y = 0 }
					light_armor = { x = 0 y = 1 }
					light_armor = { x = 0 y = 2 }
					motorized = { x = 1 y = 0 }
					motorized = { x = 1 y = 1 }
					motorized = { x = 1 y = 2 }
				}
			}
		}
		else = {
			division_template = {
				name = "Armored Division"
				regiments = {
					light_armor = { x = 0 y = 0 }
					light_armor = { x = 0 y = 1 }
					light_armor = { x = 0 y = 2 }
					infantry = { x = 1 y = 0 }
					infantry = { x = 1 y = 1 }
					infantry = { x = 1 y = 2 }
				}
			}
		}
	}
}

grant_automat_tech_template = {
	hidden_effect = {
		if = {
			limit = { has_tech = motorised_infantry }
			division_template = {
				name = "GW Automat Division"
				regiments = {
					gw_basic_automat = { x = 0 y = 0 }
					gw_basic_automat = { x = 0 y = 1 }
					gw_basic_automat = { x = 0 y = 2 }
					motorized = { x = 1 y = 0 }
					motorized = { x = 1 y = 1 }
					motorized = { x = 1 y = 2 }
				}
			}
		}
		else = {
			division_template = {
				name = "GW Automat Division"
				regiments = {
					gw_basic_automat = { x = 0 y = 0 }
					gw_basic_automat = { x = 0 y = 1 }
					gw_basic_automat = { x = 0 y = 2 }
					infantry = { x = 1 y = 0 }
					infantry = { x = 1 y = 1 }
					infantry = { x = 1 y = 2 }
				}
			}
		}
	}
}

delete_all_tech_templates = {
	if = {
		limit = { has_template = "Paratroopers" }
		delete_unit_template_and_units = { division_template = "Paratroopers" }
	}
	if = {
		limit = { has_template = "Marine Division" }
		delete_unit_template_and_units = { division_template = "Marine Division" }
	}
	if = {
		limit = { has_template = "Mountaineer Division" }
		delete_unit_template_and_units = { division_template = "Mountaineer Division" }
	}
	if = {
		limit = { has_template = "Motorized Division" }
		delete_unit_template_and_units = { division_template = "Motorized Division" }
	}
	if = {
		limit = { has_template = "Armored Division" }
		delete_unit_template_and_units = { division_template = "Armoured Division" }
	}
	if = {
		limit = { has_template = "GW Automat Division" }
		delete_unit_template_and_units = { division_template = "GW Automat Division" }
	}
}

### SPECIAL FORCES ###
SF_PARA_sabotage_effect = { #When changing this, update the research tooltip
	damage_building = {
		type = infrastructure
		damage = 2
	}
	damage_building = {
		type = industrial_complex
		damage = 1
	}
	damage_building = {
		type = arms_factory
		damage = 1
	}
	set_state_flag = {
		flag = para_drop_effect
		days = 30
		value = 1
	}
}

SF_PARA_combat_effect = { #When changing this, update the research tooltip
	every_state_division = {
		limit = {
			OWNER = { has_war_with = FROM }
		}
		set_unit_organization = 0.50
	}
	set_state_flag = {
		flag = para_drop_effect
		days = 30
		value = 1
	}
}

SF_marine_demoliton_effect = { #When changing this, update the research tooltip
	damage_building = {
		type = radar_station
		damage = 1
	}
	damage_building = {
		type = naval_base
		damage = 1
	}
	damage_building = {
		type = dockyard
		damage = 1
	}
	damage_building = {
		type = nuclear_reactor
		damage = 1
	}
	damage_building = {
		type = rocket_site
		damage = 1
	}
	damage_building = {
		type = fuel_silo
		damage = 1
	}
	set_state_flag = {
		flag = marines_commando_effect
		days = 30
	}
}

add_potential_special_forces_tree = {
	custom_effect_tooltip = add_potential_special_forces_tree_tt
	if = {
		limit = { NOT = { has_variable = sf_trees } }
		set_variable = { sf_trees = 2 }
	}
	else = {
		add_to_variable = { sf_trees = 1 }
	}
}

remove_potential_special_forces_tree = {
	if = {
		limit = { NOT = { has_variable = sf_trees } }
		set_variable = { sf_trees = 0 }
	}
	else = {
		subtract_from_variable = { sf_trees = 1 }
	}
}

