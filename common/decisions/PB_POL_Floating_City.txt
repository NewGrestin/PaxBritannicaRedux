PB_POL_Floating_City = {

	PB_POL_Install_Bulgarian_Pavilion = {
		icon = generic_construction

		cost = 10
		ai_will_do = {
			factor = 10
			
		}

		available = {

		}

		visible = {
			NOT = {
				has_country_flag = POL_Bulgarian_Pavilion
				has_global_flag = POL_Floating_City_Launched
			}
		}

		fire_only_once = yes

		days_remove = 35

		modifier = {
			civilian_factory_use = 2
		}

		remove_effect = {
			BUL = {
				add_opinion_modifier = {
					target = ROOT
					modifier = pan_slavic_opinion
				}  
			}
			hidden_effect = {
				set_country_flag = POL_Bulgarian_Pavilion
			}
		}
	}

	PB_POL_Install_Czech_Pavilion = {
		icon = generic_construction

		cost = 10
		ai_will_do = {
			factor = 10
			
		}

		available = {

		}

		visible = {
			NOT = {
				has_country_flag = POL_Czech_Pavilion
				has_global_flag = POL_Floating_City_Launched
			}
		}

		fire_only_once = yes

		days_remove = 35

		modifier = {
			civilian_factory_use = 2
		}

		remove_effect = {
			GER = {
				add_opinion_modifier = {
					target = ROOT
					modifier = protest_action
				}
			}
			hidden_effect = {
				set_country_flag = POL_Czech_Pavilion
			}
		}
	}

	PB_POL_Install_Croatian_Pavilion = {
		icon = generic_construction

		cost = 10
		ai_will_do = {
			factor = 10
			
		}

		available = {

		}

		visible = {
			NOT = {
				has_country_flag = POL_Croatian_Pavilion
				has_global_flag = POL_Floating_City_Launched
			}
		}

		fire_only_once = yes

		days_remove = 35

		modifier = {
			civilian_factory_use = 2
		}

		remove_effect = {
			HUN = {
				add_opinion_modifier = {
					target = ROOT
					modifier = protest_action
				}
			}
			hidden_effect = {
				set_country_flag = POL_Croatian_Pavilion
			}
		}
	}

	PB_POL_Install_Polish_Pavilion = {
		icon = generic_construction

		cost = 10
		ai_will_do = {
			factor = 10
			
		}

		available = {

		}

		visible = {
			NOT = {
				has_country_flag = POL_Polish_Pavilion
				has_global_flag = POL_Floating_City_Launched
			}
		}

		fire_only_once = yes

		days_remove = 35

		modifier = {
			civilian_factory_use = 2
		}

		remove_effect = {
			hidden_effect = {
				set_country_flag = POL_Polish_Pavilion
			}
		}
	}

	PB_POL_Install_Russian_Pavilion = {
		icon = generic_construction

		cost = 10
		ai_will_do = {
			factor = 10
			
		}

		available = {

		}

		visible = {
			NOT = {
				has_country_flag = POL_Russian_Pavilion
				has_global_flag = POL_Floating_City_Launched
			}
		}

		fire_only_once = yes

		days_remove = 35

		modifier = {
			civilian_factory_use = 2
		}

		remove_effect = {
			RUS = {
				add_opinion_modifier = {
					target = ROOT
					modifier = pan_slavic_opinion
				}
			}
			hidden_effect = {
				set_country_flag = POL_Russian_Pavilion
			}
		}
	}

	PB_POL_Install_Serbian_Pavilion = {
		icon = generic_construction

		cost = 10
		ai_will_do = {
			factor = 10
			
		}

		available = {

		}

		visible = {
			NOT = {
				has_country_flag = POL_Serbian_Pavilion
				has_global_flag = POL_Floating_City_Launched
			}
		}

		fire_only_once = yes

		days_remove = 35

		modifier = {
			civilian_factory_use = 2
		}

		remove_effect = {
			SER = {
				add_opinion_modifier = {
					target = ROOT
					modifier = pan_slavic_opinion
				}
			}
			hidden_effect = {
				set_country_flag = POL_Serbian_Pavilion
			}
		}
	}

	PB_POL_Install_Slovakian_Pavilion = {
		icon = generic_construction

		cost = 10
		ai_will_do = {
			factor = 10
			
		}

		available = {

		}

		visible = {
			NOT = {
				has_country_flag = POL_Slovakian_Pavilion
				has_global_flag = POL_Floating_City_Launched
			}
		}

		fire_only_once = yes

		days_remove = 35

		modifier = {
			civilian_factory_use = 2
		}

		remove_effect = {
			HUN = {
				add_opinion_modifier = {
					target = ROOT
					modifier = protest_action
				}
			}
			hidden_effect = {
				set_country_flag = POL_Slovakian_Pavilion
			}
		}
	}

	PB_POL_Accept_Prophet_Iliya_Money = {
		icon = influence_cold_war

		cost = 15
		ai_will_do = {
			factor = 10
			
		}

		days_re_enable = 20

		available = {
			NOT = {
				has_global_flag = POL_Floating_City_Launched
			}
		}

		visible = {
			NOT = {
				has_global_flag = POL_Floating_City_Launched
			}
		}

		fire_only_once = no

		days_remove = 7

		modifier = {
			political_power_gain = -0.1
		}

		remove_effect = {
			add_days_mission_timeout = {
				mission = POL_Constructing_Floating_City
				days = -15
			}
			hidden_effect = {
				set_global_flag = POL_Accept_Prophet_Iliya_Money
			}
		}
	}

	PB_POL_Accept_Knights_of_the_Cross_and_Sword_Assistance = {
		icon = influence_cold_war

		cost = 15
		ai_will_do = {
			factor = 10
			
		}


		available = {
			NOT = {
				has_global_flag = POL_Floating_City_Launched
				has_global_flag = POL_Accepted_Knights_of_the_Cross_and_Sword_Assistance
			}
		}

		visible = {
			NOT = {
				has_global_flag = POL_Floating_City_Launched
				has_global_flag = POL_Accepted_Knights_of_the_Cross_and_Sword_Assistance
				has_global_flag = POL_Catholic_Uprising
			}
		}

		fire_only_once = no

		days_remove = 15

		modifier = {
		}

		remove_effect = {
			add_political_power = 50
			hidden_effect = {
				set_global_flag = POL_Accepted_Knights_of_the_Cross_and_Sword_Assistance
			}
		}
	}

	PB_POL_Start = {
		icon = GFX_decision_hol_war_on_pacifism

		cost = 50
		ai_will_do = {
			factor = 10
			
		}

		available = {
			has_country_flag = POL_City_Built
			has_country_flag = POL_Bulgarian_Pavilion
			has_country_flag = POL_Polish_Pavilion
			has_country_flag = POL_Russian_Pavilion
			has_country_flag = POL_Serbian_Pavilion
			OR = {
				has_country_flag = POL_Czech_Pavilion
				has_country_flag = POL_Croatian_Pavilion
				has_country_flag = POL_Slovakian_Pavilion
			}
		}

		visible = {
			NOT = {
				has_global_flag = POL_Floating_City_Launched
			}
		}

		fire_only_once = yes

		days_remove = 10

		remove_effect = {
			10 = {
				add_dynamic_modifier = { modifier = POL_Floating_City1 }
				set_state_flag = POL_Where_Floating_City
			}
			hidden_effect = {
				set_global_flag = POL_Floating_City1
				set_global_flag = POL_Floating_City_Launched
				set_global_flag = POL_City_Did_Something
			}
		}
	}

	PB_POL_Activate_War_Measures = {
		icon = generic_decision

		cost = 15
		ai_will_do = {
			factor = 10
			
		}

		visible = {
			has_global_flag = POL_Floating_City1
		}

		available = {
			NOT = {
				has_country_flag = POL_moving_city
			}
			any_state = {
				has_state_flag = POL_Where_Floating_City
				OR = {
					controller = {
						OR = {
							is_ally_with = ROOT
							has_war_together_with = ROOT
						}
					}
					is_controlled_by_ROOT_or_ally = yes
				}
			}
			hidden_trigger = {
				has_global_flag = { flag = POL_City_Did_Something days > 1 }
			}
		}

		fire_only_once = no

		days_remove = 5

		complete_effect = {
			hidden_effect = {
				set_global_flag = POL_deactivating_or_activating
				clr_global_flag = POL_City_Did_Something
			}
		}

		remove_effect = {
			every_state = {
				limit = {
					has_state_flag = POL_Where_Floating_City
				}
				remove_dynamic_modifier = { modifier = POL_Floating_City1 }
				add_dynamic_modifier = { modifier = POL_Floating_City2 }
			}
			hidden_effect = {
				set_global_flag = POL_City_Did_Something
				clr_global_flag = POL_deactivating_or_activating
				clr_global_flag = POL_Floating_City1
				set_global_flag = POL_Floating_City2
			}
		}
	}

	PB_POL_Deactivate_War_Measures = {
		icon = generic_decision

		cost = 15
		ai_will_do = {
			factor = 10
			
		}

		visible = {
			has_global_flag = POL_Floating_City2
		}

		available = {
			NOT = {
				has_country_flag = POL_moving_city
			}
			hidden_trigger = {
				has_global_flag = { flag = POL_City_Did_Something days > 1 }
			}
		}

		

		fire_only_once = yes

		days_remove = 5

		complete_effect = {
			hidden_effect = {
				set_global_flag = POL_deactivating_or_activating
				clr_global_flag = POL_City_Did_Something
			}
		}

		remove_effect = {
			every_state = {
				limit = {
					has_state_flag = POL_Where_Floating_City
				}
				remove_dynamic_modifier = { modifier = POL_Floating_City2 }
				add_dynamic_modifier = { modifier = POL_Floating_City1 }
			}
			hidden_effect = {
				set_global_flag = POL_City_Did_Something
				clr_global_flag = POL_deactivating_or_activating
				clr_global_flag = POL_Floating_City2
				set_global_flag = POL_Floating_City1
			}
		}
	}

	PB_POL_travel = {

		icon = GFX_decision_move_city

		days_remove = 5

		available = {
			NOT = {
				has_country_flag = POL_moving_city
				has_global_flag = POL_deactivating_or_activating
			}
			hidden_trigger = {
				has_global_flag = { flag = POL_City_Did_Something days > 1 }
			}
			
		}

		visible = {
			
		}

		state_target = yes

		target_array = global.states

		target_trigger = {
			FROM = {
				any_neighbor_state = {
					has_state_flag = POL_Where_Floating_City
				}
				OR = {
					controller = {
						OR = {
							AND = {
								has_war = no
								has_global_flag = POL_Floating_City1
							}
							is_ally_with = ROOT
							has_war_together_with = ROOT
						}
					}
					is_controlled_by_ROOT_or_ally = yes
				}
			}
		}

		complete_effect = {
			hidden_effect = {
				POL = {
					set_country_flag = POL_moving_city
				}
				clr_global_flag = POL_City_Did_Something
			}
		}

		modifier = {
			#political_power_cost = 0.5
		}

		remove_effect = {

			every_state = {
				limit = {
					has_state_flag = POL_Where_Floating_City
				}
				if = {
					limit = {
						has_global_flag = POL_Floating_City1
					}
					remove_dynamic_modifier = { modifier = POL_Floating_City1 }
					else = {
						remove_dynamic_modifier = { modifier = POL_Floating_City2 }
					}
				}
				
				clr_state_flag = POL_Where_Floating_City
			}

			FROM = {
				if = {
					limit = {
						is_capital = yes
						controller = {
							NOT = {
								has_country_flag = POL_Floating_City_Was_Here
							}
						}
					}
					controller = {
						set_country_flag = POL_Floating_City_Was_Here
					}
					ROOT = {
						country_event = {
							id = pol.50
						}
					}
				}
				if = {
					limit = {
						has_global_flag = POL_Floating_City1
					}
					add_dynamic_modifier = { modifier = POL_Floating_City1 }
					else = {
						add_dynamic_modifier = { modifier = POL_Floating_City2 }
					}
				}
				set_state_flag = POL_Where_Floating_City
			}

			hidden_effect = {
				clr_country_flag = POL_moving_city
				set_global_flag = POL_City_Did_Something
			}
			
		}

		ai_will_do = {
			base = 0
		}
	}

	POL_Constructing_Floating_City = {

		icon = generic_construction
		
		activation = { 
			original_tag = POL
			has_global_flag = POL_Finish_Construction_Of_Floating_City
		}

		available = {
				has_global_flag = POL_Floating_City_Launched
			
			
		}

		selectable_mission = no

		is_good = yes
		fire_only_once = yes
				
		days_mission_timeout = 100

		timeout_effect = {
           hidden_effect = {
				set_country_flag = POL_City_Built
				remove_ideas = POL_Building_City
			}
		}
	}

}